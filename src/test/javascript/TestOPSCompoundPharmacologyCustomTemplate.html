<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Test Open PHACTS Target Image Widget</title>
    <!-- CSS -->
    <link rel="stylesheet" href="../../main/resources/css/biojs.openphacts.css" />
    <!--JQuery, OPS.js, helpers and handlebars --> 
    <script src="../../main/resources/dependencies/jquery/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="../../main/resources/dependencies/handlebars/handlebars-v1.3.0.js" type="text/javascript"></script>
    <script src="../../main/resources/dependencies/openphacts/helpers.js" type="text/javascript"></script>
    <script src="../../main/resources/dependencies/openphacts/ops.js" type="text/javascript"></script>

    <!-- BIOJS and Open PHACTS compound info widget -->
    <script language="JavaScript" type="text/javascript" src="../../main/javascript/Biojs.js"></script>
    <script language="JavaScript" type="text/javascript" src="../../main/javascript/Biojs.OPSCompoundPharmacology.js"></script>

    <script language="JavaScript" type="text/javascript">
	    window.onload = function() {
		    var pharmaPage = 2;
		    //This isn't meant to be pretty but just demonstrating the functionality.
		    var template = '<div id="pharma-info">{{#each pharmacology}}<div>Targets: {{#each this.targets}}{{this.title}}{{/each}}';
		    template += 'Assay Organism: {{this.assayOrganism}} Target Organism: {{#each this.targetOrganisms}}{{this.organism}}{{/each}}</div>{{/each}}</div>';
            instance = new Biojs.OPSCompoundPharmacology({
                appID: '949a7c9c',
                appKey: '734a274b418b0dbe57fc40f86e85e20e',
                appURL: 'https://beta.openphacts.org/1.3',
                URI: 'http://www.conceptwiki.org/concept/dd758846-1dac-4f0d-a329-06af9a7fa413',
		target: 'YourOwnDivId',
		template: template
		});
jQuery('#fetch-more-button')[0].addEventListener('click', function() {
            instance.fetchPage(pharmaPage, template, "pharma-info");
            pharmaPage++;
            });

        };
    </script>
</head>

<body>
    <button id="fetch-more-button">More</button>
    <div id="YourOwnDivId"></div>
</body>

</html>
